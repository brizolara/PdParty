#N canvas 0 399 671 281 10;
#X declare -path pd;
#X declare -path pdparty;
#X obj 32 44 cnv 15 596 42 empty empty empty 20 12 0 14 -228856 -66577
0;
#X obj 56 54 hsl 128 25 0 1 0 0 rain_amount r_amount Rain_Amount 6
8 0 10 -262144 -1 -1 7366 1;
#N canvas 108 288 427 326 logic 1;
#X obj 106 7 loadbang;
#X obj 221 259 declare -path pd;
#X obj 221 278 declare -path pdparty;
#X obj 19 264 soundoutput;
#X obj 26 222 r \$0-master-vol;
#X obj 19 245 *~;
#X obj 122 245 *~;
#X obj 19 201 catch~ L;
#X obj 122 201 catch~ R;
#X obj 163 7 r RESET;
#N canvas 543 72 823 581 sensors_mapping 1;
#X obj 333 13 cnv 15 140 80 empty empty empty 20 12 0 14 -261682 -66577
0;
#X msg 343 62 processedmotion \$1;
#X obj 343 86 s #pdparty;
#X obj 343 37 r s-processedmotion;
#X text 341 17 Processed sensor data ON/OFF;
#X obj 333 122 cnv 15 200 140 empty empty empty 20 12 0 14 -204786
-66577 0;
#N canvas 61 453 253 197 type 0;
#X obj 16 9 inlet;
#X obj 16 133 symbol;
#X obj 16 167 outlet;
#X msg 16 84 fastest;
#X msg 83 84 fast;
#X msg 132 83 normal;
#X msg 191 83 slow;
#X obj 16 38 sel 0 1 2 3;
#X connect 0 0 7 0;
#X connect 1 0 2 0;
#X connect 3 0 1 0;
#X connect 4 0 1 0;
#X connect 5 0 1 0;
#X connect 6 0 1 0;
#X connect 7 0 3 0;
#X connect 7 1 4 0;
#X connect 7 2 5 0;
#X connect 7 3 6 0;
#X restore 340 192 pd type;
#X obj 340 160 r s-speed-sensors;
#X obj 340 252 s #pdparty;
#X text 338 125 Speed of retrieval of processed sensor data;
#X msg 340 222 processedmotion speed \$1;
#X text 338 139 (0: fastest --> 3: slowest);
#X obj 153 14 cnv 15 100 148 empty empty empty 20 12 0 14 -233017 -66577
0;
#X obj 23 13 cnv 15 100 148 empty empty empty 20 12 0 14 -262130 -66577
0;
#X msg 162 99 orientationeuler \$1;
#X obj 162 136 s #pdparty;
#X obj 162 68 r s-run-orientEuler;
#X text 160 47 Turning ON/OFF;
#X obj 28 68 r #orientationeuler;
#X text 34 86 (yaw \, pitch \, roll);
#X obj 42 204 unpack f f f;
#X text 27 47 Receiving from sensor;
#X text 106 28 Orientation;
#X obj 21 285 cnv 15 620 240 empty empty empty 20 12 0 14 -232576 -66577
0;
#X text 20 524 https://developer.apple.com/documentation/coremotion/getting_processed_device-motion_data/understanding_reference_frames_and_device_attitude
;
#X obj 35 332 expr ((5.*$f1)+3.14159)/6.283185;
#X obj 292 352 min 1.01;
#X obj 292 331 expr 0.5789 + 0.5263*$f1;
#X obj 292 374 max 0;
#X obj 288 435 cnv 15 70 60 empty empty empty 20 12 0 14 -191407 -66577
0;
#X obj 292 451 s r_amount;
#X obj 29 434 cnv 15 70 60 empty empty empty 20 12 0 14 -260097 -66577
0;
#X obj 35 452 s r_color;
#X text 33 305 Roll;
#X text 380 452 0;
#X text 477 390 Arm up* = max rain;
#X text 478 512 * in fact \, a little sooner;
#X text 477 454 Arm down = no rain;
#X text 374 394 ~1;
#X text 477 417 Arm horizontal ~= mid rain;
#X text 379 422 == ARM =>;
#X text 476 429 0.5789;
#X text 44 406 The other way around = thin rain;
#X text 44 375 Palm up = bassy rain;
#X text 44 390 Palm down = "normal" rain;
#X text 290 305 Pitch;
#X obj 600 234 timer;
#X msg 642 209 bang;
#X obj 600 153 f 0;
#X obj 600 172 % 2;
#X obj 629 153 + 1;
#X obj 600 193 sel 0;
#X msg 600 132 bang;
#X text 597 100 Inspecting time between consecutive;
#X obj 600 255 s r-time_between_ori_events;
#X text 598 114 orientationeuler incoming values;
#X obj 146 226 s r-roll;
#X obj 88 226 s r-pitch;
#X text 40 241 To the Debug panel;
#X obj 664 337 unpack f f f;
#X text 662 376 To the Debug panel;
#X obj 664 361 s r-ax;
#X obj 704 361 s r-ay;
#X obj 744 361 s r-az;
#X obj 664 300 r #useracceleration;
#X obj 664 458 unpack f f f;
#X text 662 497 To the Debug panel;
#X obj 664 482 s r-rrx;
#X obj 710 482 s r-rry;
#X obj 756 482 s r-rrz;
#X obj 664 417 r #rotationrate;
#X obj 664 318 spigot;
#X obj 709 318 r s-debug-acc;
#X obj 664 438 spigot;
#X obj 42 184 spigot;
#X obj 709 438 r s-debug-rr;
#X obj 75 166 r s-debug-orientEuler;
#X obj 42 226 s r-yaw;
#X obj 28 108 unpack f f f;
#X obj 200 204 s euler-event;
#X obj 600 81 r euler-event;
#X connect 1 0 2 0;
#X connect 3 0 1 0;
#X connect 6 0 10 0;
#X connect 7 0 6 0;
#X connect 10 0 8 0;
#X connect 14 0 15 0;
#X connect 16 0 14 0;
#X connect 18 0 74 0;
#X connect 18 0 78 0;
#X connect 20 0 77 0;
#X connect 20 1 57 0;
#X connect 20 2 56 0;
#X connect 20 2 79 0;
#X connect 25 0 32 0;
#X connect 26 0 28 0;
#X connect 27 0 26 0;
#X connect 28 0 30 0;
#X connect 46 0 54 0;
#X connect 47 0 46 1;
#X connect 48 0 49 0;
#X connect 48 0 50 0;
#X connect 49 0 51 0;
#X connect 50 0 48 1;
#X connect 51 0 46 0;
#X connect 51 1 47 0;
#X connect 52 0 48 0;
#X connect 59 0 61 0;
#X connect 59 1 62 0;
#X connect 59 2 63 0;
#X connect 64 0 71 0;
#X connect 65 0 67 0;
#X connect 65 1 68 0;
#X connect 65 2 69 0;
#X connect 70 0 73 0;
#X connect 71 0 59 0;
#X connect 72 0 71 1;
#X connect 73 0 65 0;
#X connect 74 0 20 0;
#X connect 75 0 73 1;
#X connect 76 0 74 1;
#X connect 78 1 27 0;
#X connect 78 2 25 0;
#X connect 80 0 52 0;
#X restore 220 231 pd sensors_mapping;
#X text 113 124 (IEM lib). We had 0.129 for Cooper Baker's [pink~]
;
#X msg 17 33 \; d2_f0 20 \; d2_q 0.023 \; d2_threshold 0.16 \; d2_factor
3 \; d2_level 0.016 \; d2_hip 2000 \; rlight_level 0.15 \; rdetail_level
0.03 \; rpink_level 0.01 \; r_amount 0.58 \; r_color 0.5 \; r_rain-ON-all
set 1 \; rain-ON-all 1 \; master 3;
#X msg 205 33 \; #volume set 1 \; r-speed-sensors 0 \; r-processedmotion
1;
#X connect 0 0 12 0;
#X connect 0 0 13 0;
#X connect 4 0 6 1;
#X connect 4 0 5 1;
#X connect 5 0 3 0;
#X connect 6 0 3 1;
#X connect 7 0 5 0;
#X connect 8 0 6 0;
#X connect 9 0 12 0;
#X connect 9 0 13 0;
#X restore 250 61 pd logic;
#X obj 211 61 rain;
#X obj 48 155 tgl 25 0 rain-ON-all r_rain-ON-all ON/OFF 30 12 0 10
-4034 -1 -1 1 1;
#X obj 129 155 bng 25 250 50 0 RESET r_RESET RESET 32 12 0 10 -257985
-1 -1;
#X obj 35 14 cnv 15 1 1 empty empty Elemental_-_Rain 0 12 0 14 -233017
-66577 0;
#X obj 208 150 cnv 15 420 90 empty empty Debug 20 12 0 14 -232576 -66577
0;
#X floatatom 387 219 5 0 0 2 - r-time_between_ori_events s-time_between_ori_events
, f 5;
#X floatatom 251 185 4 0 0 0 - r-ax s-ax, f 4;
#X floatatom 277 185 4 0 0 0 - r-ay s-ay, f 4;
#X floatatom 303 185 4 0 0 0 - r-az s-az, f 4;
#X obj 250 166 cnv 15 1 1 empty empty UserAccel 0 12 0 12 -233017 -66577
0;
#X floatatom 372 185 4 0 0 0 - r-rrx s-rrx, f 4;
#X floatatom 398 185 4 0 0 0 - r-rry s-rry, f 4;
#X floatatom 424 185 4 0 0 0 - r-rrz s-rrz, f 4;
#X obj 371 166 cnv 15 1 1 empty empty RotationRate 0 12 0 12 -233017
-66577 0;
#X obj 331 185 tgl 15 0 s-debug-acc r-debug-acc empty 17 7 0 10 -262144
-1 -1 0 1;
#X obj 452 185 tgl 15 0 s-debug-rr r-debug-rr empty 17 7 0 10 -262144
-1 -1 0 1;
#X text 424 220 (inspect);
#X text 334 219 (set);
#X obj 491 165 cnv 15 1 1 empty empty OrientationEuler 0 12 0 12 -233017
-66577 0;
#X floatatom 492 185 4 0 0 0 - r-roll s-roll, f 4;
#X floatatom 518 185 4 0 0 0 - r-pitch s-pitch, f 4;
#X floatatom 544 185 4 0 0 0 - r-roll s-roll, f 4;
#X obj 276 155 tgl 15 0 s-processedmotion r-processedmotion ProcessedMotion
17 7 0 10 -191407 -1 -1 1 1;
#X obj 572 185 tgl 15 0 s-debug-orientEuler r-debug-orientEuler empty
17 7 0 10 -262144 -1 -1 0 1;
#X obj 250 219 hradio 15 1 0 4 s-speed-sensors r-speed-sensors Speed_sensor_polling
0 -8 0 10 -262144 -1 -1 0;
#X text 243 232 fast <-- slow;
#X text 356 21 Attach your iphone to your arm!;
#X text 357 58 Your arm Pitch angle will control rain amount;
#X obj 32 91 cnv 15 596 42 empty empty empty 20 12 0 14 -262130 -66577
0;
#X obj 208 96 hsl 128 15 10 4000 0 0 s-r_color_Hz r_color_Hz 10_to_4000
2 8 0 10 -260097 -1 -1 5064 1;
#X obj 208 111 hsl 128 15 4000 9000 0 0 s-r_color_Hz r_color_Hz 4000_to_9000
2 8 0 10 -260097 -1 -1 0 1;
#X obj 56 99 hsl 128 25 0 1 0 0 rcolor-0-1 r_color Rain_Color 6 8 0
10 -13330 -191407 -262144 6350 1;
#X text 357 105 And your arm Roll angle will control rain "color";
#X obj 51 207 hsl 100 26 0 5 0 0 \$0-master-vol master LEVEL 110 12
0 10 -258113 -1 -1 5940 1;
#X text 320 260 Check the whole thing at www.tiagobrizolara.com/Elemental
;
#X text 386 205 ms between consecutive Euler events;
#X connect 32 0 33 0;
